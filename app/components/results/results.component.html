<h1>Results</h1>
<p>Search Terms: {{getSearchTerms()}}</p>
<div class="row">
	<div class="col-md-8">
		<div class="panel panel-default">
			<div class="panel-heading">
			<div class="row">
				<div class="col-md-6">
					<h3 class="panel-title">
						Search Results
					</h3>
					<p>Total: {{resultsTotal | currency: "EUR":true:"1.2-2"}}</p>
					<p>{{filteredResults?.length}} items</p>
					<pagination-controls id="results"(pageChange)="p = $event"></pagination-controls>
					<select class="form-control" [(ngModel)]="resultsPerPage">
						<option value="10">10</option>
						<option value="25">25</option>
						<option value="50">50</option>
						<option value="75">75</option>
						<option value="100">100</option>
						<option value="{{filteredResults?.length}}">Show all</option>
					</select>
					<input [(ngModel)]="textFilter"/>
				</div>
				<div class="col-md-6">
					<div class="btn-group pull-right" dropdown>
			    		<button type="button" class="btn btn-default dropdown-toggle btn-sm" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" dropdownToggle>
			    		Sort <span class="caret"></span>
			    		</button>
			    		<ul class="dropdown-menu" role="menu" aria-labelledby="single-button">
			    			<li><a role="button" (click)="filteredResults = sortBy(filteredResults, 'p')"><span class="glyphicon glyphicon-eur" aria-hidden="true"></span> Item Price - Low to High</a></li>
			    			<li><a role="button" (click)="filteredResults = sortByDec(filteredResults, 'p')"><span class="glyphicon glyphicon-eur" aria-hidden="true"></span> Item Price - High to Low</a></li>
			    			<li role="separator" class="divider"></li>
			    			<li><a role="button" (click)="filteredResults = sortBy(filteredResults, 'n')"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span> Name - A to Z</a></li>
			    			<li><a role="button" (click)="filteredResults = sortByDec(filteredResults, 'n')"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span> Name - Z to A</a></li>
			    			<li role="separator" class="divider"></li>
			    			<li><a role="button" (click)="filteredResults = sortBy(filteredResults, 'qty')"><span class="glyphicon glyphicon-duplicate" aria-hidden="true"></span> Quantity - Low to High</a></li>
			    			<li><a role="button" (click)="filteredResults = sortByDec(filteredResults, 'qty')"><span class="glyphicon glyphicon-duplicate" aria-hidden="true"></span> Quantity - High to Low</a></li>
			    			<li role="separator" class="divider"></li>
			    			<li><a role="button" (click)="filteredResults = sortBy(filteredResults, 'q')"><span class="glyphicon glyphicon-asterisk" aria-hidden="true"></span> Keyword - A to Z</a></li>
			    			<li><a role="button" (click)="filteredResults = sortByDec(filteredResults,'q')"><span class="glyphicon glyphicon-asterisk" aria-hidden="true"></span> Keyword - Z to A</a></li>
			    			<li role="separator" class="divider"></li>
			    			<li><a role="button" (click)="filteredResults = sortBy(filteredResults, 's')"><span class="glyphicon glyphicon-asterisk" aria-hidden="true"></span> Store - A to Z</a></li>
			    			<li><a role="button" (click)="filteredResults = sortByDec(filteredResults,'s')"><span class="glyphicon glyphicon-asterisk" aria-hidden="true"></span> Store - Z to A</a></li>
			    		</ul>
			        </div>
				</div>
			</div>
			</div>
			<div class="panel-body">
			    <div class="row">
			    	<div class="col-md-6">
			    		<p>Store Filter</p>
			    		<div class="btn-group" *ngFor="#filterCriterion of filterCriteria">
			    			<product-list-property-filter [unfilteredList]="resultsList" [(filteredList)]="filteredResultsList" [criterion]="filterCriterion"></product-list-property-filter>
			    		</div>
			    	</div>
			    	<div class="col-md-6">
			    		<p>Query Filter</p>
			    		<div class="btn-group" *ngFor="#query of resultsListQueries">
			    			<product-list-property-filter [(list)]="filteredResultsList" [needle]="query" [haystack]="'query'"></product-list-property-filter>
			    		</div>
			    	</div>
			    </div>
			</div>
			<ul class="list-group" >
			    <!-- <li class="list-group-item" *ngFor="#result of resultsList?.items | search: textFilter | paginate: { id: 'results', itemsPerPage: resultsPerPage, currentPage: p}" > -->
			    <li class="list-group-item" *ngFor="#result of filteredResultsList?.items" >
			    	<results-list-item [item]="result"></results-list-item>
			    </li>
			</ul>
		</div>
	</div>
	<div class="col-md-4">
		<div class="panel panel-default">
			<div class="panel-heading">
				<div class="row">
					<div class="col-md-8">
						<h3 class="panel-title">
							Shopping List
						</h3>
						<p>Total: {{shoppinglistTotal | currency: "EUR":true:"1.2-2"}}</p>
						<p>{{shoppinglist?.length}} items</p>
					</div>
					<div class="col-md-4">
						<div class="btn-group pull-right" dropdown>
				    		<button type="button" class="btn btn-default dropdown-toggle btn-sm" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" dropdownToggle>
				    		Sort <span class="caret"></span>
				    		</button>
				    		<ul class="dropdown-menu" role="menu" aria-labelledby="single-button">
				    			<li><a role="button" (click)="shoppinglist = sortBy(shoppinglist, 'p')"><span class="glyphicon glyphicon-eur" aria-hidden="true"></span> Item Price - Low to High</a></li>
				    			<li><a role="button" (click)="shoppinglist = sortByDec(shoppinglist, 'p')"><span class="glyphicon glyphicon-eur" aria-hidden="true"></span> Item Price - High to Low</a></li>
				    			<li role="separator" class="divider"></li>
				    			<li><a role="button" (click)="shoppinglist = sortBy(shoppinglist, 'n')"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span> Name - A to Z</a></li>
				    			<li><a role="button" (click)="shoppinglist = sortByDec(shoppinglist, 'n')"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span> Name - Z to A</a></li>
				    			<li role="separator" class="divider"></li>
				    			<li><a role="button" (click)="shoppinglist = sortBy(shoppinglist, 'qty')"><span class="glyphicon glyphicon-duplicate" aria-hidden="true"></span> Quantity - Low to High</a></li>
				    			<li><a role="button" (click)="shoppinglist = sortByDec(shoppinglist, 'qty')"><span class="glyphicon glyphicon-duplicate" aria-hidden="true"></span> Quantity - High to Low</a></li>
				    			<li role="separator" class="divider"></li>
				    			<li><a role="button" (click)="shoppinglist = sortBy(shoppinglist, 's')"><span class="glyphicon glyphicon-asterisk" aria-hidden="true"></span> Store - A to Z</a></li>
				    			<li><a role="button" (click)="shoppinglist = sortByDec(shoppinglist,'s')"><span class="glyphicon glyphicon-asterisk" aria-hidden="true"></span> Store - Z to A</a></li>
				    		</ul>
						</div>
					</div>
				</div>
			</div>
		
			<ul class="list-group" > 
			    <li class="list-group-item" *ngFor="#item of shoppingList?.items" >
			    	<shopping-list-item [item]="item"></shopping-list-item>
			    </li>
			</ul>
		</div>
	</div>
</div>
