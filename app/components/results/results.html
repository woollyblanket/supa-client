<h1>Results</h1>
<p>Search Terms: {{getSearchTerms()}}</p>
<div class="row">
	<div class="col-md-8">
		<div class="panel panel-default">
			<div class="panel-heading">
			<div class="row">
				<div class="col-md-6">
					<h3 class="panel-title">
						Search Results
					</h3>
					<p>Total: {{resultsTotal | currency: "EUR":true:"1.2-2"}}</p>
					<p>{{filteredResults?.length}} items</p>
					<pagination-controls id="results"(pageChange)="p = $event"></pagination-controls>
				</div>
				<div class="col-md-6">
					<div class="btn-group pull-right" dropdown>
			    		<button type="button" class="btn btn-default dropdown-toggle btn-sm" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" dropdownToggle>
			    		Sort <span class="caret"></span>
			    		</button>
			    		<ul class="dropdown-menu" role="menu" aria-labelledby="single-button">
			    			<li><a role="button" (click)="filteredResults = sortBy(filteredResults, 'p')"><span class="glyphicon glyphicon-eur" aria-hidden="true"></span> Item Price - Low to High</a></li>
			    			<li><a role="button" (click)="filteredResults = sortByDec(filteredResults, 'p')"><span class="glyphicon glyphicon-eur" aria-hidden="true"></span> Item Price - High to Low</a></li>
			    			<li role="separator" class="divider"></li>
			    			<li><a role="button" (click)="filteredResults = sortBy(filteredResults, 'n')"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span> Name - A to Z</a></li>
			    			<li><a role="button" (click)="filteredResults = sortByDec(filteredResults, 'n')"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span> Name - Z to A</a></li>
			    			<li role="separator" class="divider"></li>
			    			<li><a role="button" (click)="filteredResults = sortBy(filteredResults, 'qty')"><span class="glyphicon glyphicon-duplicate" aria-hidden="true"></span> Quantity - Low to High</a></li>
			    			<li><a role="button" (click)="filteredResults = sortByDec(filteredResults, 'qty')"><span class="glyphicon glyphicon-duplicate" aria-hidden="true"></span> Quantity - High to Low</a></li>
			    			<li role="separator" class="divider"></li>
			    			<li><a role="button" (click)="filteredResults = sortBy(filteredResults, 'q')"><span class="glyphicon glyphicon-asterisk" aria-hidden="true"></span> Keyword - A to Z</a></li>
			    			<li><a role="button" (click)="filteredResults = sortByDec(filteredResults,'q')"><span class="glyphicon glyphicon-asterisk" aria-hidden="true"></span> Keyword - Z to A</a></li>
			    			<li role="separator" class="divider"></li>
			    			<li><a role="button" (click)="filteredResults = sortBy(filteredResults, 's')"><span class="glyphicon glyphicon-asterisk" aria-hidden="true"></span> Store - A to Z</a></li>
			    			<li><a role="button" (click)="filteredResults = sortByDec(filteredResults,'s')"><span class="glyphicon glyphicon-asterisk" aria-hidden="true"></span> Store - Z to A</a></li>
			    		</ul>
			        </div>
				</div>
			</div>
			</div>
			<div class="panel-body">
			    <div class="row">
			    	<div class="col-md-6">
			    		<p>Store Filter</p>
			    		<!-- {{storeFilterItems | json}} -->
			    		<div class="btn-group">
			    			<button *ngFor="#store of stores" class="btn btn-default btn-sm" (click)="toggleFilter(store, storeFilterItems)" [ngClass]="{'active': storeFilterItems.indexOf(store) !== -1}" aria-pressed="true">{{rs.getStoreNameByKey(store)}}</button>
			    		</div>
			    		<div class="btn-group">
				    		<button class="btn btn-danger btn-sm" (click)="removeAllStoresFromFilter()">
				    			<span class="glyphicon glyphicon-minus" aria-hidden="true"></span> All
				    		</button>
				    		<button class="btn btn-success btn-sm" (click)="addAllStoresToFilter()">
				    			<span class="glyphicon glyphicon-plus" aria-hidden="true"></span> All
				    		</button>
				    	</div>
			    	</div>
			    	<div class="col-md-6">
			    		<p>Keyword Filter</p>
			    		<!-- {{keywordFilterItems | json}} -->
			    		<div class="btn-group">
			    			<button *ngFor="#keyword of keywords" class="btn btn-default btn-sm" (click)="toggleFilter(keyword, keywordFilterItems)" [ngClass]="{'active': keywordFilterItems.indexOf(keyword) !== -1}" aria-pressed="true">{{keyword}}</button>
			    		</div>
			    		<div class="btn-group">
				    		<button class="btn btn-danger btn-sm" (click)="removeAllKeywordsFromFilter()">
				    			<span class="glyphicon glyphicon-minus" aria-hidden="true"></span> All
				    		</button>
				    		<button class="btn btn-success btn-sm" (click)="addAllKeywordsToFilter()">
				    			<span class="glyphicon glyphicon-plus" aria-hidden="true"></span> All
				    		</button>
				    	</div>
			    	</div>
			    </div>
			</div>
			<ul class="list-group" ><!-- *ngIf="showActive"> -->
			    <li class="list-group-item" *ngFor="#result of filteredResults | paginate: { id: 'results', itemsPerPage: 10, currentPage: p}" >
			    	<result-item [item]="result" (qtyInc)="resultsTotal = incTotal(result, resultsTotal)" (qtyDec)="resultsTotal = decTotal(result, resultsTotal)" (itemAddedToShoppingList)="addItemToShoppingList(result)"></result-item>
			    </li>
			</ul>
		</div>
	</div>
	<div class="col-md-4">
		<div class="panel panel-default">
			<div class="panel-heading">
				<div class="row">
					<div class="col-md-8">
						<h3 class="panel-title">
							Shopping List
						</h3>
						<p>Total: {{shoppinglistTotal | currency: "EUR":true:"1.2-2"}}</p>
						<p>{{shoppinglist?.length}} items</p>
					</div>
					<div class="col-md-4">
						<div class="btn-group pull-right" dropdown>
				    		<button type="button" class="btn btn-default dropdown-toggle btn-sm" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" dropdownToggle>
				    		Sort <span class="caret"></span>
				    		</button>
				    		<ul class="dropdown-menu" role="menu" aria-labelledby="single-button">
				    			<li><a role="button" (click)="shoppinglist = sortBy(shoppinglist, 'p')"><span class="glyphicon glyphicon-eur" aria-hidden="true"></span> Item Price - Low to High</a></li>
				    			<li><a role="button" (click)="shoppinglist = sortByDec(shoppinglist, 'p')"><span class="glyphicon glyphicon-eur" aria-hidden="true"></span> Item Price - High to Low</a></li>
				    			<li role="separator" class="divider"></li>
				    			<li><a role="button" (click)="shoppinglist = sortBy(shoppinglist, 'n')"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span> Name - A to Z</a></li>
				    			<li><a role="button" (click)="shoppinglist = sortByDec(shoppinglist, 'n')"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span> Name - Z to A</a></li>
				    			<li role="separator" class="divider"></li>
				    			<li><a role="button" (click)="shoppinglist = sortBy(shoppinglist, 'qty')"><span class="glyphicon glyphicon-duplicate" aria-hidden="true"></span> Quantity - Low to High</a></li>
				    			<li><a role="button" (click)="shoppinglist = sortByDec(shoppinglist, 'qty')"><span class="glyphicon glyphicon-duplicate" aria-hidden="true"></span> Quantity - High to Low</a></li>
				    			<li role="separator" class="divider"></li>
				    			<li><a role="button" (click)="shoppinglist = sortBy(shoppinglist, 's')"><span class="glyphicon glyphicon-asterisk" aria-hidden="true"></span> Store - A to Z</a></li>
				    			<li><a role="button" (click)="shoppinglist = sortByDec(shoppinglist,'s')"><span class="glyphicon glyphicon-asterisk" aria-hidden="true"></span> Store - Z to A</a></li>
				    		</ul>
						</div>
					</div>
				</div>
			</div>
		
			<ul class="list-group" > <!-- *ngIf="!showActive"> -->
			    <li class="list-group-item" *ngFor="#item of shoppinglist" >
			    	<shoppinglist-item [item]="item" (qtyInc)="shoppinglistTotal = incTotal(item, shoppinglistTotal)" (qtyDec)="shoppinglistTotal = decTotal(item, shoppinglistTotal)" (itemRemovedFromeShoppingList)="removeItemFromShoppingList(item)">Loading...</shoppinglist-item>
			    </li>
			</ul>
		</div>
	</div>
</div>
		