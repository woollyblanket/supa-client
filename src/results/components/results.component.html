<md-content layout="row">
	<div flex="66" layout="column">
		<md-card>
			<md-card-title>
				<md-card-title-text>
					<span class="md-headline">
						<button md-fab class="md-mini" (click)="openSideNav('results')">
						    <i md-icon>filter_list</i>
						</button>
						Search Results ({{filteredResultsList?.count() || 0}})
					</span>
				</md-card-title-text>
			</md-card-title>
			<md-card-content>
				<div layout="row" layout-align="space-between center" class="md-margin">
					<div flex="15">
						<p>Items per page:</p>
						<select class="form-control" [(ngModel)]="resultsPerPage">
							<option value="10">10</option>
							<option value="25">25</option>
							<option value="50">50</option>
							<option value="75">75</option>
							<option value="100">100</option>
							<option value="{{filteredResultsList?.count()}}">Show all</option>
						</select>
					</div>
					<div flex="30">
						<pagination-controls #pc id="results"(pageChange)="currentPage = $event">
							<paginate-template [pc]="pc"></paginate-template>
						</pagination-controls>
					</div>
					<div flex="10">
						<sort-product-list (sort)="sortListBy($event, filteredResultsList)">
						</sort-product-list>
					</div>
				</div>
				<md-divider></md-divider>
				<md-list>
					<md-list-item *ngFor="#result of filteredResultsList?.items | paginate: { id: 'results', itemsPerPage: resultsPerPage, currentPage: currentPage}">
						<md-divider></md-divider>
						<results-list-item 
							flex="100" 
							[item]="result" 
							layout-margin
							(add)="addToShoppingList($event)">
						</results-list-item>
					</md-list-item>
				</md-list>
				<pagination-controls #pc id="results" (pageChange)="currentPage = $event">
					<paginate-template [pc]="pc"></paginate-template>
				</pagination-controls>
		    </md-card-content>
		</md-card>
	</div>
	<div flex="33" layout="column">
		<md-card>
			<md-card-title>
				<md-card-title-text>
					<span class="md-headline">
						Shopping List ({{shoppingList?.count() || 0}})
					</span>
				</md-card-title-text>
			</md-card-title>
			<md-card-content>
				<div layout="row" layout-align="space-between center" class="md-margin">
					<div flex="15" flex-offset="85">
						<sort-product-list (sort)="sortListBy($event, shoppingList)">
						</sort-product-list>
					</div>
				</div>
				<md-divider></md-divider>
				<md-list>
					<md-list-item *ngFor="#item of shoppingList?.items">
						<shopping-list-item 
							flex="100" 
							[item]="item" 
							layout-margin
							(remove)="removeFromShoppingList($event)">
						</shopping-list-item>
						<md-divider></md-divider>
					</md-list-item>
				</md-list>
		    </md-card-content>
		</md-card>
	</div>
</md-content>

<md-sidenav-container layout="row" flex>
    <md-sidenav name="results" align="left" layout="column">
      	<md-toolbar class="md-theme-indigo">
        	<h1 class="md-toolbar-tools">Results Filter</h1>
      	</md-toolbar>
      	<md-content layout-padding>
      		<p>Current Item Count: {{filteredResultsList?.count() || 0}}</p>
			<md-input-container class="md-block" flex-gt-xs>
				<label>Text Filter</label>
				<input md-input [ngModel]="nameFilter" (ngModelChange)="nameFilterChange($event)">
			</md-input-container>
			<product-list-property-filter 
				[criterion]="criterion" 
				(clicked)="filterResults()" 
				*ngFor="#criterion of filterCriteriaCollection.store?.items">
			</product-list-property-filter>
			<br>
			<product-list-property-filter 
				[criterion]="criterion" 
				(clicked)="filterResults()" 
				*ngFor="#criterion of filterCriteriaCollection.query?.items">
			</product-list-property-filter>
			<br>
	        <button md-raised-button (click)="closeSideNav('results')">Done</button>
      	</md-content>
    </md-sidenav>
</md-sidenav-container>